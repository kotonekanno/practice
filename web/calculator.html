<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>è¨ˆç®—æ©Ÿ</title>
    <style>
      h1{
        text-align: center;
        font-size: 50px;
      }
      .frame{
        color: lightblue;
      }
      p{
        font-size: 30px;
      }
      input{
        width: 200px;
        padding: 3px;
        font-size: 30px;
        text-align: right;
      }
      #output{
        padding: 3px;
        font-size: 50px;
      }
      button{
        width: 200px;
        padding: 5px;
        margin: 15px;
        font-size: 30px;
      }
      #hint{
        font-size: 10px;
        color: gray;
      }
    </style>
  </head>
  <body>

    <h1 class="frame">âˆ’ âœ• Ã· ï¼‹ Ã· âˆ’ âœ• </h1>
    <h1 id="title">ãµã¤ã†ã®è¨ˆç®—æ©Ÿ</h1>
    
    <div style="text-align: center;">  
      <p>a: <input type="text" id="input1"></p>
      <p>b: <input type="text" id="input2"></p>

      <div id="button_area">
        <div>
          <span><button onclick="plus(); onClick('add');">è¶³ã—ç®—</button></span>
          <span><button onclick="minus(); onClick('sub');">å¼•ãç®—</button></span>
        </div>
        <div>
          <span><button onclick="times(); onClick('mul');">æ›ã‘ç®—</button></span>
          <span><button onclick="divide(); onClick('div');">å‰²ã‚Šç®—</button></span>
        </div>
      </div>

      <p id="output">a â–¡ b = ?</p>
      <div id="secret_quiz"></div>
      <p id="msg"></p>
      
      <details id="hint">
        <summary>ç‰¹æ®Šã‚³ãƒãƒ³ãƒ‰ã®ç­”ãˆ</summary>
        å¼•ãç®—â†’æ›ã‘ç®—â†’å‰²ã‚Šç®—â†’è¶³ã—ç®—â†’å‰²ã‚Šç®—â†’å¼•ãç®—â†’æ›ã‘ç®—
      </details> 
    </div>

    <h1 class="frame">âˆ’ âœ• Ã· ï¼‹ Ã· âˆ’ âœ• </h1>
    
  </body>
  <script>
    const input1 = document.getElementById("input1");
    const input2 = document.getElementById("input2");
    const output = document.getElementById("output");

    const title = document.getElementById("title");
    const buttons = document.getElementsByTagName("button");
    const buttonArea = document.getElementById("button_area");
    const secretQuiz = document.getElementById("secret_quiz");
    const frame = document.getElementsByClassName("frame");
    const msg = document.getElementById("msg");

    let secretMode = false;
    let secretCmd = ["sub", "mul", "div", "add", "div", "sub", "mul"];
    let index = 0;

    function plus() {
      msg.innerHTML = ""
      let result = Number(input1.value) + Number(input2.value);
      if (!secretMode) str = "a + b = " + result;
      else str = "a ? b = " + result;
      output.innerHTML = str;
    }
    function minus() {
      msg.innerHTML = ""
      let result = Number(input1.value) - Number(input2.value);
      if (!secretMode) str = "a - b = " + result;
      else str = "a ? b = " + result;
      output.innerHTML = str;
    }
    function times() {
      msg.innerHTML = ""
      let result = Number(input1.value) * Number(input2.value);
      if (!secretMode) str = "a âœ• b = " + result;
      else str = "a ? b = " + result;
      output.innerHTML = str;
    }
    function divide() {
      msg.innerHTML = ""
      let result = Number(input1.value) / Number(input2.value);
      if (!secretMode) str = "a Ã· b = " + result;
      else str = "a ? b = " + result;
      output.innerHTML = str;
    }

    function onClick(type) {
      if (!secretMode) {
        if (type === secretCmd[index]) {
          index++;
          if (index === secretCmd.length) changeMode();
        } else {
          index = 0;
        }
      }
    }

    function answer() {
      const topLeft = document.getElementById("top_left");
      const topRight = document.getElementById("top_right");
      const bottomLeft = document.getElementById("bottom_left");
      const bottomRight = document.getElementById("bottom_right");

      if (topLeft.value === "å¼•ãç®—" && topRight.value === "å‰²ã‚Šç®—" && bottomLeft.value === "æ›ã‘ç®—" && bottomRight.value === "è¶³ã—ç®—") {
        msg.innerHTML = "æ­£è§£â˜º"
        revertMode();
      } else {
        msg.innerHTML = "ä¸æ­£è§£ğŸ˜ˆ"
      }
    }
    
    function changeMode() {
      secretMode = true;
      title.innerHTML = "é˜¿ä¿®ç¾…è¨ˆç®—æ©Ÿ";
      title.style.color = "red";
      for (let i=0; i<2; i++) frame[i].innerHTML = "ğŸ˜ˆğŸ˜ˆğŸ˜ˆğŸ˜ˆğŸ˜ˆğŸ˜ˆğŸ˜ˆ";

      buttonArea.innerHTML = `
        <div>
          <span><button onclick="minus(); onClick('sub');">ï¼Ÿï¼Ÿï¼Ÿ</button></span>
          <span><button onclick="divide(); onClick('div');">ï¼Ÿï¼Ÿï¼Ÿ</button></span>
        </div>
        <div>
          <span><button onclick="times(); onClick('mul');">ï¼Ÿï¼Ÿï¼Ÿ</button></span>
          <span><button onclick="plus(); onClick('add');">ï¼Ÿï¼Ÿï¼Ÿ</button></span>
        </div>
      `;

      secretQuiz.innerHTML = `
        <div>
          <span class="ans"><select id="top_left">
            <option>è¶³ã—ç®—</option>
            <option>å¼•ãç®—</option>
            <option>æ›ã‘ç®—</option>
            <option>å‰²ã‚Šç®—</option>
          </select></span>
          <span class="ans"><select id="top_right">
            <option>è¶³ã—ç®—</option>
            <option>å¼•ãç®—</option>
            <option>æ›ã‘ç®—</option>
            <option>å‰²ã‚Šç®—</option>
          </select></span>
        </div>
        <div>
          <span class="ans"><select id="bottom_left">
            <option>è¶³ã—ç®—</option>
            <option>å¼•ãç®—</option>
            <option>æ›ã‘ç®—</option>
            <option>å‰²ã‚Šç®—</option>
          </select></span>
          <span class="ans"><select id="bottom_right">
            <option>è¶³ã—ç®—</option>
            <option>å¼•ãç®—</option>
            <option>æ›ã‘ç®—</option>
            <option>å‰²ã‚Šç®—</option>
          </select></span>
        </div>
        <p><button onclick="answer();">ç­”ãˆåˆã‚ã›</button></p>
      `;
    }
    
    function revertMode() {
      secretMode = false;
      title.innerHTML = "ãµã¤ã†ã®è¨ˆç®—æ©Ÿ";
      title.style.color = "black";
      for (let i=0; i<2; i++) frame[i].innerHTML = "âˆ’ âœ• Ã· ï¼‹ Ã· âˆ’ âœ• ";
      buttons[0].innerHTML = "è¶³ã—ç®—";
      buttons[1].innerHTML = "å¼•ãç®—";
      buttons[2].innerHTML = "æ›ã‘ç®—";
      buttons[3].innerHTML = "å‰²ã‚Šç®—";

      buttonArea.innerHTML = `
        <div>
          <span><button onclick="plus(); onClick('add');">è¶³ã—ç®—</button></span>
          <span><button onclick="minus(); onClick('sub');">å¼•ãç®—</button></span>
        </div>
        <div>
          <span><button onclick="times(); onClick('mul');">æ›ã‘ç®—</button></span>
          <span><button onclick="divide(); onClick('div');">å‰²ã‚Šç®—</button></span>
        </div>
      `
      secretQuiz.innerHTML = ""
    }
  </script>
</html>